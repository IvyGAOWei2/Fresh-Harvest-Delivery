{% for product in products %}
<div id="productCard{{product.product_id}}" class="col-md-6 col-lg-6 col-xl-4" data-product-id="{{product.product_id}}">
    <div class="position-relative fruit-item">
        <div class="fruite-img border border-bottom-0" style="overflow: hidden;">
            <img src="{{ url_for('static', filename='images/product/' + product.image) }}" class="img-fluid rounded-top" alt="{{ product.name }}" style="max-height: 250px; width: 100%;">
        </div>
        <div class="text-white bg-secondary px-3 py-1 rounded position-absolute" style="top: 10px; left: 10px;">{{ product.category_name }}</div>
        <div class="p-4 border border-top-0">
            <h5>{{ product.name }}</h5>
            <p>{{ product.description[:100] }}{% if product.description|length > 100 %}...{% endif %}</p>
            <div class="mt-2 mb-4">
                <strong class="text-dark fs-5 fw-bold">
                    ${{ product.price }} / 
                    {% if product.unit_name == 'Weight' %}kg{% elif product.unit_name == 'kg' %}kg{% elif product.unit_name == 'g' %}g{% elif product.unit_name == 'Each' %}ea{% endif %}
                </strong>
            </div>
            <div class="d-flex justify-content-between align-items-center btn-add-to-cart">
                <div class="quantity-controls">
                    <button class="btn btn-sm btn-minus rounded-circle bg-light" data-unit="{{ product.unit_name }}">-</button>
                    <input type="number" class="quantity-input form-control form-control-sm text-center"
                        value="{% if product.unit_name == 'Weight' or product.unit_name == 'kg' %}0.25{% elif product.unit_name == 'g' %}10{% elif product.unit_name == 'Each' %}1{% endif %}"
                        min="{% if product.unit_name == 'Weight' or product.unit_name == 'kg' %}0.25{% elif product.unit_name == 'g' %}10{% else %}1{% endif %}"
                        step="{% if product.unit_name == 'Weight' or product.unit_name == 'kg' %}0.25{% elif product.unit_name == 'g' %}10{% else %}1{% endif %}"
                        style="width: 65px;">
                    <button class="btn btn-sm btn-plus rounded-circle bg-light" data-unit="{{ product.unit_name }}">+</button>
                </div>
                
                <span class="ms-2" style="font-size: 20px;">{% if product.unit_name == 'Weight' %}kg{% elif product.unit_name == 'kg' %}kg{% elif product.unit_name == 'g' %}g{% elif product.unit_name == 'Each' %}ea{% else %}{{ product.unit_name }}{% endif %}</span>
                
                <a href="#" class="btn-add-to-cart btn btn-primary rounded-pill px-3" data-id="{{ product.product_id }}" data-name="{{ product.name }}" data-price="{{ product.price }}" data-img="{{ url_for('static', filename='images/product/' + product.image) }}" data-unit="{% if product.unit_name == 'Weight' %}kg{% elif product.unit_name == 'kg' %}kg{% elif product.unit_name == 'g' %}g{% elif product.unit_name == 'Each' %}ea{% else %}{{ product.unit_name }}{% endif %}">
                    <i class="fa fa-shopping-bag me-2"></i> Add to cart
                </a>
            </div>
        </div>
    </div>
</div>
{% endfor %}